---
---

<header class="fixed top-0 left-0 right-0 z-50 bg-white border-b border-gray-200 dark:bg-gray-800 dark:border-gray-700">
  <div class="flex items-center justify-between h-16 px-4">
    <div class="flex items-center space-x-4">
      <!-- Mobile menu button -->
      <button 
        id="mobile-menu-button"
        type="button"
        class="lg:hidden text-gray-500 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5"
        aria-label="Toggle sidebar navigation"
      >
        <i class="fas fa-bars text-xl"></i>
      </button>

      <a href="/" class="flex items-center">
        <span class="text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent">
          Interview Helper
        </span>
      </a>
    </div>

    <div class="flex items-center gap-4">
      <button
        id="theme-toggle"
        type="button"
        class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5"
        aria-label="Toggle dark mode"
      >
        <i id="theme-toggle-dark-icon" class="hidden fas fa-moon text-lg"></i>
        <i id="theme-toggle-light-icon" class="hidden fas fa-sun text-lg"></i>
      </button>

      <a
        href="https://github.com/yshashi/InterviewHelper"
        target="_blank"
        rel="noopener noreferrer"
        class="text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 focus:outline-none focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 rounded-lg text-sm p-2.5"
        title="View on GitHub"
      >
        <i class="fab fa-github text-lg"></i>
      </a>
    </div>
  </div>
</header>

<script>
  const THEME_KEY = 'interview_helper_theme';

  // Theme toggle functionality
  function updateThemeIcons() {
    const darkIcon = document.getElementById('theme-toggle-dark-icon');
    const lightIcon = document.getElementById('theme-toggle-light-icon');

    if (document.documentElement.classList.contains('dark')) {
      darkIcon?.classList.add('hidden');
      lightIcon?.classList.remove('hidden');
    } else {
      lightIcon?.classList.add('hidden');
      darkIcon?.classList.remove('hidden');
    }
  }

  // Function to get current theme
  function getCurrentTheme() {
    return localStorage.getItem(THEME_KEY) === 'dark' || 
      (!localStorage.getItem(THEME_KEY) && window.matchMedia('(prefers-color-scheme: dark)').matches);
  }

  // Function to set theme
  function setTheme(isDark: boolean) {
    localStorage.setItem(THEME_KEY, isDark ? 'dark' : 'light');
    document.documentElement.classList.toggle('dark', isDark);
    updateThemeIcons();
  }

  // Initial theme setup
  setTheme(getCurrentTheme());

  // Theme toggle handler
  const themeToggleBtn = document.getElementById('theme-toggle');
  themeToggleBtn?.addEventListener('click', () => {
    const isDark = !document.documentElement.classList.contains('dark');
    setTheme(isDark);
  });

  // Update theme on navigation
  document.addEventListener('astro:after-swap', () => {
    setTheme(getCurrentTheme());
  });

  // Update theme on page load
  document.addEventListener('astro:page-load', () => {
    setTheme(getCurrentTheme());
  });
</script>
